language: cpp
before_install:
  - wget -O ~/codacy-coverage-reporter-assembly-latest.jar https://github.com/codacy/codacy-coverage-reporter/releases/download/4.0.5/codacy-coverage-reporter-4.0.5-assembly.jar
after_script:
  - make coverage
  - java ~/codacy-coverage-reporter report --language CPP --force-language -r coverage.xml --partial
compiler:
  - gcc
  - clang
os:
  - linux
  - osx
addons:
  apt:
    sources:
      - ppa:snaipewastaken/ppa
    packages:
      - criterion-dev
      - lcov
  homebrew:
    packages: snaipe/soft/criterion
jobs:
  include:
    stage: Report
    install: skip
    script:
     = java ~/codacy-coverage-reporter report final
